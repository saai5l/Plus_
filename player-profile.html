<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Plus Dev â€” Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
  :root {
    --orange: #fc7823;
    --orange-dark: #d95c0d;
    --orange-glow: rgba(252,120,35,0.18);
    --bg: #0a0a0c;
    --card: rgba(20,20,24,0.95);
    --border: rgba(252,120,35,0.18);
    --text: #f0f0f0;
    --muted: rgba(255,255,255,0.45);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'Tajawal', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* BG */
  .bg-fx {
    position: fixed; inset: 0; z-index: 0; pointer-events: none;
    background:
      radial-gradient(ellipse 60% 40% at 70% 10%, rgba(252,120,35,0.08) 0%, transparent 70%),
      radial-gradient(ellipse 40% 60% at 10% 80%, rgba(252,120,35,0.05) 0%, transparent 70%);
  }

  .grid-lines {
    position: fixed; inset: 0; z-index: 0; pointer-events: none;
    background-image:
      linear-gradient(rgba(252,120,35,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(252,120,35,0.03) 1px, transparent 1px);
    background-size: 60px 60px;
  }

  .wrap { position: relative; z-index: 1; max-width: 960px; margin: 0 auto; padding: 30px 20px 60px; }

  /* TOP NAV */
  .top-nav {
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px 24px;
    background: rgba(10,10,12,0.85);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    position: sticky; top: 0; z-index: 100;
  }
  .nav-logo { display:flex; align-items:center; gap:10px; font-size:1.1rem; font-weight:900; color:var(--orange); }
  .nav-logo img { width:36px; height:36px; border-radius:50%; }
  .back-btn {
    background: rgba(252,120,35,0.1);
    border: 1px solid var(--border);
    color: var(--orange);
    padding: 8px 18px; border-radius: 20px;
    cursor: pointer; font-family: 'Tajawal', sans-serif;
    font-size: 0.88rem; font-weight: 600;
    transition: all 0.25s;
    text-decoration: none; display: inline-flex; align-items: center; gap: 6px;
  }
  .back-btn:hover { background: var(--orange); color: white; }

  /* HERO CARD */
  .hero-card {
    margin-top: 32px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 24px;
    overflow: hidden;
    position: relative;
  }

  .hero-banner {
    height: 130px;
    background: linear-gradient(135deg, #1a0a00, #2d1200, #1a0a00);
    position: relative;
    overflow: hidden;
  }
  .hero-banner::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(252,120,35,0.3) 0%, transparent 60%);
  }
  .hero-banner::after {
    content: 'PLUS DEV RP';
    position: absolute;
    bottom: 14px; left: 20px;
    font-size: 0.7rem; font-weight: 900;
    letter-spacing: 4px;
    color: rgba(252,120,35,0.25);
  }

  .hero-stripe {
    position: absolute; top: 0; right: 0;
    width: 200px; height: 100%;
    background: repeating-linear-gradient(
      -45deg, transparent, transparent 8px,
      rgba(252,120,35,0.06) 8px, rgba(252,120,35,0.06) 16px
    );
  }

  .hero-body { padding: 0 28px 28px; }

  .avatar-wrap {
    display: flex; align-items: flex-end; gap: 18px;
    margin-top: -44px; position: relative;
  }

  .avatar {
    width: 88px; height: 88px; border-radius: 50%;
    border: 4px solid var(--bg);
    background: linear-gradient(135deg, var(--orange), var(--orange-dark));
    display: flex; align-items: center; justify-content: center;
    font-size: 2.2rem; font-weight: 900; color: white;
    position: relative; flex-shrink: 0;
    cursor: pointer; transition: transform 0.3s;
    box-shadow: 0 8px 30px rgba(252,120,35,0.4);
  }
  .avatar:hover { transform: scale(1.05); }

  .avatar-edit {
    position: absolute; bottom: 2px; left: 2px;
    width: 24px; height: 24px; border-radius: 50%;
    background: var(--orange); color: white;
    display: flex; align-items: center; justify-content: center;
    font-size: 10px; cursor: pointer;
    border: 2px solid var(--bg);
  }

  .badge-rank {
    background: linear-gradient(135deg, var(--orange), var(--orange-dark));
    color: white; border-radius: 20px;
    padding: 4px 14px; font-size: 0.78rem; font-weight: 700;
    letter-spacing: 0.5px; display: inline-flex; align-items: center; gap: 5px;
    box-shadow: 0 4px 14px rgba(252,120,35,0.35);
    margin-bottom: 6px;
  }

  .hero-info { flex: 1; margin-top: 10px; }
  .player-name { font-size: 1.6rem; font-weight: 900; line-height: 1.2; }
  .player-char { color: var(--muted); font-size: 0.9rem; margin-top: 4px; }
  .player-char span { color: var(--orange); font-weight: 600; }

  .hero-actions { display: flex; gap: 10px; margin-top: 18px; flex-wrap: wrap; }
  .edit-profile-btn {
    background: linear-gradient(135deg, var(--orange), var(--orange-dark));
    border: none; color: white;
    padding: 10px 22px; border-radius: 20px;
    cursor: pointer; font-family: 'Tajawal', sans-serif;
    font-size: 0.88rem; font-weight: 700;
    transition: all 0.25s; display: flex; align-items: center; gap: 7px;
    box-shadow: 0 4px 16px rgba(252,120,35,0.35);
  }
  .edit-profile-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(252,120,35,0.45); }

  .share-btn {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: var(--muted); padding: 10px 18px; border-radius: 20px;
    cursor: pointer; font-family: 'Tajawal', sans-serif; font-size: 0.88rem;
    transition: all 0.25s; display: flex; align-items: center; gap: 7px;
  }
  .share-btn:hover { border-color: var(--border); color: var(--orange); }

  /* STATS GRID */
  .stats-grid {
    display: grid; grid-template-columns: repeat(4, 1fr);
    gap: 14px; margin-top: 28px;
  }

  .stat-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px; padding: 20px 18px;
    text-align: center; position: relative; overflow: hidden;
    transition: all 0.3s; cursor: default;
  }
  .stat-card::before {
    content: ''; position: absolute;
    top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, var(--orange), transparent);
    opacity: 0; transition: opacity 0.3s;
  }
  .stat-card:hover { border-color: rgba(252,120,35,0.35); transform: translateY(-3px); }
  .stat-card:hover::before { opacity: 1; }

  .stat-icon { font-size: 1.5rem; margin-bottom: 8px; }
  .stat-val { font-size: 1.8rem; font-weight: 900; color: var(--orange); line-height: 1; }
  .stat-label { color: var(--muted); font-size: 0.78rem; margin-top: 5px; }

  /* CONTENT GRID */
  .content-grid {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 18px; margin-top: 20px;
  }

  .section-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px; padding: 22px;
  }
  .section-card.full { grid-column: 1 / -1; }

  .section-title {
    font-size: 0.88rem; font-weight: 700;
    color: var(--orange); letter-spacing: 1px;
    text-transform: uppercase; margin-bottom: 16px;
    display: flex; align-items: center; gap: 8px;
    padding-bottom: 10px; border-bottom: 1px solid var(--border);
  }

  /* BADGES */
  .badges-grid { display: flex; flex-wrap: wrap; gap: 10px; }
  .badge-item {
    background: rgba(252,120,35,0.08);
    border: 1px solid var(--border);
    border-radius: 12px; padding: 10px 14px;
    display: flex; align-items: center; gap: 8px;
    font-size: 0.82rem; transition: all 0.25s;
    cursor: default;
  }
  .badge-item:hover { background: var(--orange-glow); border-color: rgba(252,120,35,0.4); }
  .badge-item .bi { font-size: 1.2rem; }
  .badge-item .bd { }
  .badge-item .bd-name { font-weight: 700; font-size: 0.82rem; }
  .badge-item .bd-desc { color: var(--muted); font-size: 0.72rem; }
  .badge-locked { opacity: 0.35; filter: grayscale(1); }

  /* ACTIVITY */
  .activity-list { display: flex; flex-direction: column; gap: 10px; }
  .activity-item {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 14px;
    background: rgba(255,255,255,0.02);
    border-radius: 10px; border: 1px solid rgba(255,255,255,0.04);
    font-size: 0.85rem;
  }
  .act-icon {
    width: 32px; height: 32px; border-radius: 8px;
    background: var(--orange-glow); border: 1px solid var(--border);
    display: flex; align-items: center; justify-content: center;
    font-size: 0.9rem; flex-shrink: 0;
  }
  .act-text { flex: 1; }
  .act-text strong { color: var(--orange); }
  .act-time { color: var(--muted); font-size: 0.75rem; }

  /* PROGRESS BAR */
  .xp-section { margin-top: 6px; }
  .xp-label { display:flex; justify-content:space-between; font-size:0.8rem; margin-bottom:6px; }
  .xp-label span:first-child { color: var(--muted); }
  .xp-label span:last-child { color: var(--orange); font-weight: 700; }
  .xp-bar { height: 8px; background: rgba(255,255,255,0.06); border-radius: 99px; overflow: hidden; }
  .xp-fill {
    height: 100%; border-radius: 99px;
    background: linear-gradient(90deg, var(--orange-dark), var(--orange));
    transition: width 1.2s cubic-bezier(0.34,1.56,0.64,1);
    box-shadow: 0 0 10px rgba(252,120,35,0.4);
  }

  /* CHAR INFO */
  .info-list { display: flex; flex-direction: column; gap: 10px; }
  .info-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.04);
  }
  .info-row:last-child { border-bottom: none; }
  .info-key { color: var(--muted); font-size: 0.84rem; }
  .info-val { font-weight: 700; font-size: 0.84rem; }
  .info-val.orange { color: var(--orange); }

  /* STATUS DOT */
  .online-dot { width: 10px; height: 10px; border-radius: 50%; background: #2ecc71; display: inline-block; animation: pulse2 2s infinite; }
  @keyframes pulse2 { 0%,100%{opacity:1}50%{opacity:0.4} }

  /* EDIT MODAL */
  .modal-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.8);
    backdrop-filter: blur(8px); z-index: 1000;
    display: none; align-items: center; justify-content: center;
  }
  .modal-overlay.open { display: flex; animation: fadeIn 0.2s; }
  @keyframes fadeIn { from{opacity:0} to{opacity:1} }

  .modal-box {
    background: #111114; border: 1px solid var(--border);
    border-radius: 20px; padding: 28px; width: 90%; max-width: 440px;
    animation: slideUp 0.3s cubic-bezier(0.34,1.56,0.64,1);
  }
  @keyframes slideUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

  .modal-title { font-size: 1.1rem; font-weight: 700; color: var(--orange); margin-bottom: 20px; }

  .form-group { margin-bottom: 16px; }
  .form-label { font-size: 0.82rem; color: var(--muted); margin-bottom: 6px; display: block; }
  .form-input, .form-select {
    width: 100%; background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: white; padding: 10px 14px; border-radius: 10px;
    font-family: 'Tajawal', sans-serif; font-size: 0.9rem; outline: none;
    transition: border-color 0.2s;
  }
  .form-input:focus, .form-select:focus { border-color: var(--orange); }
  .form-select option { background: #111; }

  .modal-actions { display: flex; gap: 10px; margin-top: 20px; }
  .btn-save {
    flex: 1; background: linear-gradient(135deg, var(--orange), var(--orange-dark));
    border: none; color: white; padding: 11px;
    border-radius: 12px; cursor: pointer; font-family: 'Tajawal', sans-serif;
    font-size: 0.9rem; font-weight: 700; transition: all 0.25s;
  }
  .btn-save:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(252,120,35,0.4); }
  .btn-cancel2 {
    background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
    color: var(--muted); padding: 11px 18px; border-radius: 12px;
    cursor: pointer; font-family: 'Tajawal', sans-serif; font-size: 0.9rem;
    transition: all 0.2s;
  }
  .btn-cancel2:hover { background: rgba(255,255,255,0.1); color: white; }

  /* TOAST */
  .toast {
    position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%);
    background: #111; border: 1px solid var(--border);
    color: white; padding: 12px 22px; border-radius: 14px;
    font-size: 0.88rem; z-index: 9999;
    opacity: 0; transition: opacity 0.3s; pointer-events: none;
    box-shadow: 0 8px 30px rgba(0,0,0,0.5);
  }
  .toast.show { opacity: 1; }

  @media(max-width:640px) {
    .stats-grid { grid-template-columns: repeat(2,1fr); }
    .content-grid { grid-template-columns: 1fr; }
    .player-name { font-size: 1.3rem; }
  }
</style>
</head>
<body>

<div class="bg-fx"></div>
<div class="grid-lines"></div>

<!-- NAV -->
<nav class="top-nav">
  <div class="nav-logo">
    <img src="https://cdn.discordapp.com/avatars/990216490085142578/4b1d6f63ac4b6e1a59a320ef820a2053.png?size=256" alt="logo"/>
    Plus Dev
  </div>
  <a href="index.html" class="back-btn"><i class="fas fa-arrow-right"></i> Ø±Ø¬ÙˆØ¹</a>
</nav>

<div class="wrap">

  <!-- HERO -->
  <div class="hero-card">
    <div class="hero-banner">
      <div class="hero-stripe"></div>
    </div>
    <div class="hero-body">
      <div class="avatar-wrap">
        <div class="avatar" id="avatar-display" onclick="openEdit()">
          <span id="avatar-letter">Ù…</span>
          <div class="avatar-edit"><i class="fas fa-camera"></i></div>
        </div>
        <div class="hero-info">
          <div class="badge-rank" id="rank-badge"><i class="fas fa-star"></i> <span id="rank-display">Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ</span></div>
          <div class="player-name" id="name-display">Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ</div>
          <div class="player-char">Ø§Ù„ÙƒØ±ÙƒØªØ±: <span id="char-display">Ø£Ø¨Ùˆ ÙÙ‡Ø¯</span> &nbsp;|&nbsp; <span class="online-dot"></span> Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†</div>
          <div class="player-char" style="margin-top:3px;font-size:0.78rem;opacity:0.5" id="player-discord-id"></div>
        </div>
      </div>

      <div class="hero-actions">
        <button class="edit-profile-btn" onclick="openEdit()"><i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</button>
        <button class="share-btn" onclick="copyLink()"><i class="fas fa-share-alt"></i> Ù…Ø´Ø§Ø±ÙƒØ©</button>
      </div>
    </div>
  </div>

  <!-- STATS -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">ğŸ•</div>
      <div class="stat-val" id="stat-sessions">47</div>
      <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ’¬</div>
      <div class="stat-val" id="stat-questions">128</div>
      <div class="stat-label">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø·Ø±ÙˆØ­Ø©</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ“–</div>
      <div class="stat-val" id="stat-laws">89</div>
      <div class="stat-label">Ù‚ÙˆØ§Ù†ÙŠÙ† Ù…Ù‚Ø±ÙˆØ¡Ø©</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">â­</div>
      <div class="stat-val" id="stat-score">4.8</div>
      <div class="stat-label">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…</div>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="content-grid">

    <!-- CHAR INFO -->
    <div class="section-card">
      <div class="section-title"><i class="fas fa-id-card"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØ±ÙƒØªØ±</div>
      <div class="info-list">
        <div class="info-row">
          <span class="info-key">Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙƒØªØ±</span>
          <span class="info-val orange" id="info-char">Ø£Ø¨Ùˆ ÙÙ‡Ø¯</span>
        </div>
        <div class="info-row">
          <span class="info-key">Ø§Ù„Ø±ØªØ¨Ø©</span>
          <span class="info-val" id="info-rank">Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ</span>
        </div>
        <div class="info-row">
          <span class="info-key">Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© / Ø§Ù„Ø¹ØµØ§Ø¨Ø©</span>
          <span class="info-val" id="info-family">Ø¨Ø¯ÙˆÙ†</span>
        </div>
        <div class="info-row">
          <span class="info-key">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</span>
          <span class="info-val" id="info-join">ÙŠÙ†Ø§ÙŠØ± 2025</span>
        </div>
        <div class="info-row">
          <span class="info-key">Ø§Ù„Ø­Ø§Ù„Ø©</span>
          <span class="info-val" style="color:#2ecc71">Ù†Ø¸ÙŠÙ âœ“</span>
        </div>
      </div>
    </div>

    <!-- XP & LEVEL -->
    <div class="section-card">
      <div class="section-title"><i class="fas fa-chart-line"></i> Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆØ§Ù„Ù…Ø³ØªÙˆÙ‰</div>
      <div style="text-align:center; margin-bottom:18px;">
        <div style="font-size:2.8rem; font-weight:900; color:var(--orange)" id="level-display">12</div>
        <div style="color:var(--muted); font-size:0.82rem;">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
      </div>
      <div class="xp-section">
        <div class="xp-label"><span>XP Ø§Ù„Ø­Ø§Ù„ÙŠ</span><span id="xp-text">1,240 / 1,500</span></div>
        <div class="xp-bar"><div class="xp-fill" id="xp-fill" style="width:0%"></div></div>
        <div style="color:var(--muted); font-size:0.75rem; margin-top:8px; text-align:center">260 XP Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</div>
      </div>
      <div style="margin-top:18px;">
        <div class="xp-label"><span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</span><span style="color:#2ecc71">96%</span></div>
        <div class="xp-bar">
          <div class="xp-fill" style="width:96%; background:linear-gradient(90deg,#1a8a3a,#2ecc71);"></div>
        </div>
      </div>
    </div>

    <!-- BADGES -->
    <div class="section-card full">
      <div class="section-title"><i class="fas fa-trophy"></i> Ø§Ù„Ø´Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</div>
      <div class="badges-grid">
        <div class="badge-item">
          <div class="bi">ğŸ–ï¸</div>
          <div class="bd"><div class="bd-name">Ø¹Ø¶Ùˆ Ø£ØµÙŠÙ„</div><div class="bd-desc">Ø§Ù†Ø¶Ù… Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</div></div>
        </div>
        <div class="badge-item">
          <div class="bi">ğŸ“–</div>
          <div class="bd"><div class="bd-name">Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</div><div class="bd-desc">Ù‚Ø±Ø£ +50 Ù‚Ø§Ù†ÙˆÙ†</div></div>
        </div>
        <div class="badge-item">
          <div class="bi">ğŸ’¬</div>
          <div class="bd"><div class="bd-name">Ù…Ø­Ø§ÙˆØ± Ù†Ø´ÙŠØ·</div><div class="bd-desc">100 Ø³Ø¤Ø§Ù„ ÙÙŠ Ø§Ù„Ø´Ø§Øª</div></div>
        </div>
        <div class="badge-item">
          <div class="bi">âœ…</div>
          <div class="bd"><div class="bd-name">Ù…Ù„ØªØ²Ù…</div><div class="bd-desc">30 ÙŠÙˆÙ… Ø¨Ø¯ÙˆÙ† Ù…Ø®Ø§Ù„ÙØ©</div></div>
        </div>
        <div class="badge-item badge-locked">
          <div class="bi">ğŸ‘‘</div>
          <div class="bd"><div class="bd-name">Ø§Ù„Ù…Ù„Ùƒ</div><div class="bd-desc">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 20</div></div>
        </div>
        <div class="badge-item badge-locked">
          <div class="bi">ğŸ†</div>
          <div class="bd"><div class="bd-name">Ù…Ø­ØªØ±Ù</div><div class="bd-desc">Ø§Ø¬ØªØ² Quiz Ø¨Ø¯Ø±Ø¬Ø© 100%</div></div>
        </div>
      </div>
    </div>

    <!-- ACTIVITY -->
    <div class="section-card full">
      <div class="section-title"><i class="fas fa-history"></i> Ø¢Ø®Ø± Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</div>
      <div class="activity-list">
        <div class="activity-item">
          <div class="act-icon">ğŸ’¬</div>
          <div class="act-text">Ø³Ø£Ù„ Ø¹Ù† <strong>Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³Ø±Ù‚Ø§Øª</strong></div>
          <div class="act-time">Ù…Ù†Ø° 10 Ø¯Ù‚Ø§Ø¦Ù‚</div>
        </div>
        <div class="activity-item">
          <div class="act-icon">ğŸ“–</div>
          <div class="act-text">Ù‚Ø±Ø£ Ù‚Ø§Ù†ÙˆÙ† <strong>VDM ÙˆØ§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</strong></div>
          <div class="act-time">Ù…Ù†Ø° 2 Ø³Ø§Ø¹Ø©</div>
        </div>
        <div class="activity-item">
          <div class="act-icon">ğŸ†</div>
          <div class="act-text">Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø´Ø§Ø±Ø© <strong>Ù…Ø­Ø§ÙˆØ± Ù†Ø´ÙŠØ·</strong></div>
          <div class="act-time">Ø£Ù…Ø³</div>
        </div>
        <div class="activity-item">
          <div class="act-icon">ğŸ”</div>
          <div class="act-text">Ø¯Ø®Ù„ Ù„Ù„Ù…Ù†ØµØ© Ù…Ù† Ø¬Ù‡Ø§Ø² Ø¬Ø¯ÙŠØ¯</div>
          <div class="act-time">Ù…Ù†Ø° 3 Ø£ÙŠØ§Ù…</div>
        </div>
        <div class="activity-item">
          <div class="act-icon">âœï¸</div>
          <div class="act-text">Ø­Ø¯Ù‘Ø« <strong>Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙƒØªØ±</strong></div>
          <div class="act-time">Ù…Ù†Ø° Ø£Ø³Ø¨ÙˆØ¹</div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- EDIT MODAL -->
<div class="modal-overlay" id="edit-modal">
  <div class="modal-box">
    <div class="modal-title"><i class="fas fa-user-edit" style="margin-left:8px"></i> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</div>

    <div class="form-group">
      <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (Ù„Ù„Ø¹Ø±Ø¶)</label>
      <input class="form-input" id="edit-name" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ" value="Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ"/>
    </div>
    <div class="form-group">
      <label class="form-label">Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙƒØªØ±</label>
      <input class="form-input" id="edit-char" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø¨Ùˆ ÙÙ‡Ø¯" value="Ø£Ø¨Ùˆ ÙÙ‡Ø¯"/>
    </div>
    <div class="form-group">
      <label class="form-label">Ø§Ù„Ø±ØªØ¨Ø©</label>
      <select class="form-select" id="edit-rank">
        <option value="Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ">ğŸ‘¤ Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ</option>
        <option value="Ø´Ø±Ø·ÙŠ">ğŸ‘® Ø´Ø±Ø·ÙŠ</option>
        <option value="Ù…Ø³Ø¹Ù">ğŸš‘ Ù…Ø³Ø¹Ù</option>
        <option value="Ù…Ø­Ø§Ù…ÙŠ">âš–ï¸ Ù…Ø­Ø§Ù…ÙŠ</option>
        <option value="Ø¹Ø³ÙƒØ±ÙŠ">ğŸª– Ø¹Ø³ÙƒØ±ÙŠ</option>
        <option value="Ø¹ØµØ§Ø¨Ø©">ğŸ’€ Ø¹ØµØ§Ø¨Ø©</option>
        <option value="ØªØ§Ø¬Ø±">ğŸ’¼ ØªØ§Ø¬Ø±</option>
        <option value="Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ">ğŸ”§ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© / Ø§Ù„Ø¹ØµØ§Ø¨Ø©</label>
      <input class="form-input" id="edit-family" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„Ø³Ø§Ù„Ù… Ø£Ùˆ Ø¨Ø¯ÙˆÙ†" value="Ø¨Ø¯ÙˆÙ†"/>
    </div>

    <div class="modal-actions">
      <button class="btn-save" onclick="saveProfile()"><i class="fas fa-save" style="margin-left:6px"></i> Ø­ÙØ¸</button>
      <button class="btn-cancel2" onclick="closeEdit()">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<div class="toast" id="toast">âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!</div>

<script>
  window.addEventListener('load', () => {

    // ===== ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ =====
    let discordUser = null;
    try {
      discordUser = JSON.parse(localStorage.getItem('user') || localStorage.getItem('plusdev_user') || 'null');
    } catch(e) {}

    if (!discordUser || !discordUser.id) {
      showToast('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
      setTimeout(() => { window.location.href = 'index.html'; }, 1800);
      return;
    }

    // ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ =====
    let profile = {};
    try { profile = JSON.parse(localStorage.getItem('plusdev_profile') || '{}'); } catch(e) {}

    // Ø¯Ù…Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Discord Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù„Ù
    const merged = {
      name: profile.name || discordUser.name || 'Ù„Ø§Ø¹Ø¨',
      char: profile.char || '',
      rank: profile.rank || 'Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ',
      family: profile.family || 'Ø¨Ø¯ÙˆÙ†',
      joinDate: profile.joinDate || new Date().toLocaleDateString('ar-SA', { year:'numeric', month:'long' }),
      discordName: discordUser.name || '',
      discordAvatar: discordUser.avatar || '',
      discordId: discordUser.id || '',
      sessions: profile.sessions || 1,
      questions: profile.questions || 0,
      lawsRead: profile.lawsRead || 0,
    };

    applyProfile(merged, discordUser);

    // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    setTimeout(() => {
      animateNumEl('stat-sessions', merged.sessions);
      animateNumEl('stat-questions', merged.questions);
      animateNumEl('stat-laws', merged.lawsRead);
      document.getElementById('xp-fill').style.width = '82%';
    }, 300);
  });

  function applyProfile(p, discordUser) {
    // Ø§Ù„Ø§Ø³Ù…
    document.getElementById('name-display').textContent = p.name || p.discordName || 'Ù„Ø§Ø¹Ø¨';
    document.getElementById('char-display').textContent = p.char || 'â€”';
    document.getElementById('rank-display').textContent = p.rank || 'Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ';
    document.getElementById('rank-badge').innerHTML = `<i class="fas fa-star"></i> ${p.rank || 'Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ'}`;
    document.getElementById('info-char').textContent = p.char || 'â€”';
    document.getElementById('info-rank').textContent = p.rank || 'Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ';
    document.getElementById('info-family').textContent = p.family || 'Ø¨Ø¯ÙˆÙ†';
    document.getElementById('info-join').textContent = p.joinDate || 'â€”';

    // Ø§Ù„Ø£ÙØ§ØªØ§Ø± Ù…Ù† Discord
    const discordAvatar = (discordUser && discordUser.avatar) ? discordUser.avatar : p.discordAvatar;
    const avatarWrap = document.getElementById('avatar-display');
    if (discordAvatar) {
      // Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø­Ø±Ù Ø¨ØµÙˆØ±Ø© Discord
      avatarWrap.innerHTML = `
        <img src="${discordAvatar}" style="width:100%;height:100%;border-radius:50%;object-fit:cover;" alt="avatar"/>
        <div class="avatar-edit" onclick="openEdit()"><i class="fas fa-camera"></i></div>`;
    } else {
      document.getElementById('avatar-letter').textContent = (p.name || p.discordName || 'Ù„').charAt(0);
    }

    // Discord ID badge
    const idEl = document.getElementById('player-discord-id');
    if (idEl && p.discordId) idEl.textContent = 'Discord ID: ' + p.discordId;
  }

  function openEdit() {
    const profile = JSON.parse(localStorage.getItem('plusdev_profile') || '{}');
    document.getElementById('edit-name').value = document.getElementById('name-display').textContent;
    document.getElementById('edit-char').value = profile.char || '';
    document.getElementById('edit-rank').value = profile.rank || 'Ù…ÙˆØ§Ø·Ù† Ø¹Ø§Ø¯ÙŠ';
    document.getElementById('edit-family').value = profile.family || '';
    document.getElementById('edit-modal').classList.add('open');
  }

  function closeEdit() {
    document.getElementById('edit-modal').classList.remove('open');
  }

  function saveProfile() {
    const name = document.getElementById('edit-name').value.trim();
    const char = document.getElementById('edit-char').value.trim();
    const rank = document.getElementById('edit-rank').value;
    const family = document.getElementById('edit-family').value.trim();
    if (!name || !char) { showToast('â— ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©'); return; }

    // Ø§Ø­ÙØ¸ Ù…Ø¹ Ø§Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Discord ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    const old = JSON.parse(localStorage.getItem('plusdev_profile') || '{}');
    const updated = { ...old, name, char, rank, family };
    localStorage.setItem('plusdev_profile', JSON.stringify(updated));

    let discordUser = null;
    try { discordUser = JSON.parse(localStorage.getItem('user') || 'null'); } catch(e){}
    applyProfile(updated, discordUser);
    closeEdit();
    showToast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ!');
  }

  function animateNumEl(id, to) {
    const el = document.getElementById(id);
    if (!el) return;
    const isFloat = (to % 1 !== 0);
    const start = performance.now();
    (function update(now) {
      const p = Math.min((now - start) / 1000, 1);
      const eased = 1 - Math.pow(1 - p, 3);
      el.textContent = isFloat ? (to * eased).toFixed(1) : Math.round(to * eased).toLocaleString('ar');
      if (p < 1) requestAnimationFrame(update);
    })(start);
  }

  function copyLink() {
    navigator.clipboard.writeText(window.location.href).then(() => showToast('ğŸ”— ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!'));
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2800);
  }

  document.getElementById('edit-modal').addEventListener('click', function(e) {
    if (e.target === this) closeEdit();
  });
</script>
</body>
</html>
